# All The Preaching Search Tools

**Semantic search and AI-powered answers for "All The Preaching" transcripts.**

This powerful tool allows you to perform semantic searches across a vast library of "All The Preaching" (ATP) transcripts. It leverages a locally-run Large Language Model (LLM) to provide direct answers to your questions, drawing context from the content of your search queries.

---

## Features

*   **Semantic Search:** Go beyond simple keyword matching. Find relevant passages based on the meaning and context of your search terms.
*   **AI-Powered Q&A:** Ask questions in natural language and receive answers generated by an LLM, based on the ATP transcripts.
*   **Local First:** Your data and queries are processed locally on your machine.
*   **User-Friendly Interface:** A clean and simple graphical user interface (GUI) built with Streamlit makes searching and interacting with the tool a breeze.

---

## Getting Started

Follow these instructions to get the application up and running on your local machine.

### 1. Prerequisites

Before you begin, you need to have Python and Ollama installed on your system.

*   **Python:** The core programming language for this application.
    *   [**Download Python**](https://www.python.org/downloads/)

*   **Ollama:** This allows you to run large language models locally.
    *   [**Download Ollama**](https://ollama.com/)

### 2. Setting Up the Python Environment

It is highly recommended to use a virtual environment to manage the project's dependencies. This keeps your global Python installation clean and avoids conflicts.

1.  **Open your terminal or command prompt.**

2.  **Navigate to the project's root directory:**

    ```bash
    cd path\to\your\project\All_The_Preaching_Search_Tools
    ```

3.  **Create a new virtual environment:**

    ```bash
    python -m venv .venv
    ```

    *   `python -m venv`:  Invokes Python to run the `venv` module for creating virtual environments.
    *   `.venv`: The standard name for the virtual environment directory.

### 3. Installing Dependencies

Once your virtual environment is created, you need to install the necessary Python libraries.

1.  **Activate the virtual environment:**

    *   **On Windows (Command Prompt):**
        ```bash
        .venv\Scripts\activate
        ```
    *   **On Windows (PowerShell):**
        ```powershell
        .venv\Scripts\Activate.ps1
        ```
    *   **On macOS and Linux:**
        ```bash
        source .venv/bin/activate
        ```

    You'll know the environment is active when you see `(.venv)` at the beginning of your command prompt.

    If you can't activate the environment, replace "python" in the next commands with the path to the python.exe in your .venv folder (.venv/Scripts/python.exe)

    For example, instead of 
    
    ```bash
    python -m pip install -r requirements.txt
    ```

    do

    ```bash
    C:\repos\All_The_Preaching_Search_Tools\.venv\Scripts\python.exe -m pip install -r requirements.txt
    ```

2.  **Install the required packages:**

    This project uses a `requirements.txt` file to manage its dependencies. To install them, simply run:

    ```bash
    python -m pip install -r requirements.txt
    ```
    * `pip install`: The command to install Python packages.
    * `-r requirements.txt`: This flag tells `pip` to install all the packages listed in the `requirements.txt` file.

    **Alternatively**, you can install the packages individually:
    ```bash
    python -m pip install streamlit chromadb numpy sentence_transformers pocketflow ollama
    ```

### 4. Download the transcript dataset

It took over a day to embed all the chunks, so take advantage of that by using this:

[HuggingFace Dataset](https://huggingface.co/datasets/Theodor-Crosswell/All_The_Preaching_Transcripts)

Download the .chroma or .chroma.zip and place .chroma in the root directory of the project, so that it is like C:\repos\All_The_Preaching_Search_Tools\.chroma\

### 5. Running the Application

With the dependencies installed, you are now ready to launch the application.

1.  **Make sure your virtual environment is still active.**

2.  **Run the following command in your terminal:**

    ```bash
    python -m streamlit run src/Welcome_to_ATP_Search.py
    ```

    *   `streamlit run`:  The command to execute a Streamlit application.
    *   `src/Welcome_to_ATP_Search.py`: The path to the main application file.

Your web browser should automatically open with the application running.

---

## Core Technologies

*   **Streamlit:** For building the interactive web-based GUI.
*   **Ollama:** For running the local LLM that powers the question-answering feature.
*   **ChromaDB:** A vector database used to store and search through the transcript embeddings.
*   **Sentence Transformers:** To create the numerical representations (embeddings) of the text for semantic search.
*   **PocketFlow:** An LLM chat framework used for the LLM chat page.
*   **Numpy:** For numerical operations, assisting in sorting search results.

---

## Contributing

Contributions are welcome! If you have suggestions for improvements or want to add new features, please feel free to open an issue or submit a pull request.

---

## TODO

* **Dataset updates:** Make updating the .chroma database easier when new releases are published.
* **Better LLM system prompts:** to allow for higher quality LLM output.
* **Full-text search option:** In case you need to find a specific word.
* **Other things:** There are many other things to do, this is just a list of some of them.

---

## License

This project is licensed under the [MIT License](LICENSE).
